<!DOCTYPE html>
<html lang="en">
<head>
    <title>Sign-Up</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/register.css' %}">
    <link rel="stylesheet" href="{% static 'img/intro-bg.jpg' %}">

</head>   
<body>

    <div class="topnav">
        <a href="{% url 'index' %}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="20" fill="currentColor" class="bi bi-house-fill" viewBox="0 0 16 16">
            <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5Z"/>
            <path d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6Z"/>
          </svg>  Home</a>
    </div>

    <div style="text-align:center;" class="content">

        <div class="container">
            <form id="signup">

                <div class="header">
                    <br><h3>Sign Up</h3>    
                </div>
                
                <div class="sep"></div>
        
                <div class="inputs">  
                    <input type="email" id="firstName" name="firstName" placeholder="First Name" autofocus >
                    
                    <input type="email" id="lastName" name="lastName" placeholder="Last Name" >
                
                    <input type="email" id="email" name="email" placeholder="e-mail" />
                
                    <input type="password" id="password" name="password" placeholder="Password" />
                    
                    <a id="submit" >SIGN UP</a>               
                </div>
            </form>
        </div>
        
        <p style="visibility: hidden; color: red;" id="errorRequiredFields">Required fields is empty</p>
        <p style="visibility: hidden;" id="errorRequiredFields">Required fields is empty</p>
        <!-- <p style="visibility: hidden; color: red;" id="invalidName">Invalid name</p> -->
    </div>


</body>
<script>
$(document).ready(function(){   
    $( "#submit" ).on('click', function() {
        var firstName = $( '#firstName' ).val(); 
        var lastName = $( '#lastName' ).val(); 
        var email = $( '#email' ).val();
        var password = $( '#password' ).val();

        if (firstName === "" || lastName === "" || email === "" || password === "") {
             $('#errorRequiredFields').css( "visibility", "visible" );
             return
        }    
        $.ajax({
            url: "{% url 'register' %}",
            method: "POST",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({
                first_name: firstName,
                last_name: lastName,
                email: email,
                password: password
            }),
            success: function(data) {
                var url = "{% url 'login' %}";
                $(location).attr('href', url)
            },
            // error: function(request, status, error) {
            //     $('#invalidName').css( "visibility", "visible" );
            // }
        }) 
    })
})     
</script> 
</html>